{{define "title"}} ‚Äî –ù–∞–π–¥–∏ –∫–æ–º–∞–Ω–¥—É{{end}}

{{define "content"}}
<div class="filters">
    <a href="/" class="filter-pill {{if and (not .FilterRole) (not .FilterType)}}active{{end}}">–í—Å–µ</a>
    <a href="/?type=commercial" class="filter-pill {{if eq .FilterType "commercial"}}active{{end}}">üí∞ –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π</a>
    <a href="/?type=non-commercial" class="filter-pill {{if eq .FilterType "non-commercial"}}active{{end}}">ü§ù –ù–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π</a>
    {{range .Roles}}
    <a href="/?role={{.Slug}}" class="filter-pill {{if eq $.FilterRole .Slug}}active{{end}}">{{.Name}}</a>
    {{end}}
</div>

{{if .FilterStack}}
<div class="active-filters">
    <span class="active-filter">
        —Å—Ç–µ–∫: {{.FilterStack}}
        <a href="/?role={{.FilterRole}}" class="filter-remove"><i data-lucide="x" class="icon-sm"></i></a>
    </span>
</div>
{{end}}

{{if .Projects}}
<div class="projects-grid">
    {{range .Projects}}
    <a href="/project/{{.Slug}}" class="project-card">
        <div class="card-header">
            <h3 class="card-title">{{.Title}}</h3>
            <span class="card-date">{{formatDate .CreatedAt}}</span>
        </div>

        <div class="card-type">
            {{if eq .Type "commercial"}}
            <span class="type-badge type-commercial">üí∞ –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π</span>
            {{else}}
            <span class="type-badge type-non-commercial">ü§ù –ù–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π</span>
            {{end}}
        </div>

        <p class="card-desc">{{truncate .Description 160}}</p>

        {{if .Stack}}
        <div class="card-tags">
            <i data-lucide="wrench" class="icon-sm"></i>
            {{range .Stack}}
            <span class="tag tag-stack">{{.}}</span>
            {{end}}
        </div>
        {{end}}

        {{if .Roles}}
        <div class="card-roles">
            <i data-lucide="users" class="icon-sm"></i>
            {{range .Roles}}
            <span class="badge badge-{{.Slug}}">{{.Name}}{{if gt .Count 1}} <span class="badge-count">x{{.Count}}</span>{{end}}</span>
            {{end}}
        </div>
        {{end}}

        <div class="card-author">
            {{if .Author.PhotoURL}}<img src="{{.Author.PhotoURL}}" alt="" class="author-avatar">{{else}}<span class="author-avatar">{{slice .Author.Name 0 1}}</span>{{end}}
            <span class="author-name">{{.Author.Name}}</span>
        </div>
    </a>
    {{end}}
</div>
{{else}}
<div class="empty-state">
    <i data-lucide="search" class="empty-icon"></i>
    {{if or .FilterRole .FilterStack .FilterType}}
    <p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
    <a href="/" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</a>
    {{else}}
    <p>–ü—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
    {{if .User}}
    <a href="/project/new" class="btn btn-secondary">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç</a>
    {{end}}
    {{end}}
</div>
{{end}}
{{end}}
